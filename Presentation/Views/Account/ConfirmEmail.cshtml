
<h1 class="text-center pt-5">Confirmação de Conta</h1>

<form class="text-center" asp-controller="Account" asp-action="ConfirmEmail" method="post">
    <div asp-validation-summary="All" class="text-danger"></div>
    @if (ViewBag.SuccessMessage != null && ViewBag.SuccessMessage == true)
    {
        <div class="alert alert-success mt-1 w-auto">
            Foi enviado um link para a verificação de conta para o email cadastrado.
        </div>
        <meta http-equiv="refresh" content="10;url=/Home/Index">
    }

    <h5 class="mt-5 mb-5">Selecione o campo que deseja verificar:</h5>
    <a asp-controller="Account" asp-action="MyAccount" class="btn btn-primary d-sm-inline-flex mx-5 mt-1"><i class="bi bi-arrow-return-left mx-2"></i>Voltar</a>
    
    @if (ViewBag.IsEmailConfirmed != null && ViewBag.IsEmailConfirmed)
    {      
        <div class="form-check form-check-inline mt-1">
            <label class="form-check-label text-success">
                Este email está verificado
            </label>
        </div>
    }
    else
    {
        <div class="form-check form-check-inline mt-1">
            <input class="form-check-input" type="checkbox" id="emailConfirmation" name="Email" value="@ViewBag.UserEmail">
            <label class="form-check-label" for="emailConfirmation">
                Confirmar Email
            </label>
        </div>

        <button type="submit" id="confirmButton" class="btn btn-success mt-1" disabled>Confirmar</button>
    }
</form>

@section scripts {
    <script>
        document.getElementById("emailConfirmation").addEventListener("change", function () {
            var confirmButton = document.getElementById("confirmButton");

            if (this.checked) {
                confirmButton.removeAttribute("disabled");
            } else {
                confirmButton.setAttribute("disabled", "disabled");
            }
        });
    </script>
}
